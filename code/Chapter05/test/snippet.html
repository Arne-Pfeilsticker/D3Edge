<pre><code style="display: block; padding: 0.5em; background-color: #f4f4f4; font-size: 0.75em; color: black;"><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">001:</span>describe(<span class="string" style="color: #050;">'Reusable&nbsp;Bar&nbsp;Chart&nbsp;Test&nbsp;Suite'</span>,&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>()&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">002:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;barChart,&nbsp;dataset,&nbsp;fixture;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">003:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">004:</span>&nbsp;&nbsp;&nbsp;&nbsp;beforeEach(<span class="function"><span class="keyword" style="font-weight: bold; color: navy;">function</span>&nbsp;<span class="params">()</span>&nbsp;{</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">005:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataset&nbsp;=&nbsp;[<span class="number" style="color: #800;">10</span>,&nbsp;<span class="number" style="color: #800;">20</span>,&nbsp;<span class="number" style="color: #800;">30</span>,&nbsp;<span class="number" style="color: #800;">40</span>];<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">006:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barChart&nbsp;=&nbsp;d3.edge.barChart();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">007:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fixture&nbsp;=&nbsp;d3.select(<span class="string" style="color: #050;">'body'</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">008:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.append(<span class="string" style="color: #050;">'div'</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">009:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.classed(<span class="string" style="color: #050;">'test-container'</span>,&nbsp;<span class="literal" style="color: #800;">true</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">010:</span>&nbsp;&nbsp;&nbsp;&nbsp;});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">011:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">012:</span>&nbsp;&nbsp;&nbsp;&nbsp;afterEach(<span class="function"><span class="keyword" style="font-weight: bold; color: navy;">function</span>&nbsp;<span class="params">()</span>&nbsp;{</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">013:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fixture.remove();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">014:</span>&nbsp;&nbsp;&nbsp;&nbsp;});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">015:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">016:</span>&nbsp;&nbsp;&nbsp;&nbsp;it(<span class="string" style="color: #050;">'should&nbsp;render&nbsp;a&nbsp;chart&nbsp;with&nbsp;minimal&nbsp;requirements'</span>,&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>()&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">017:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fixture.datum(dataset).call(barChart);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">018:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(fixture.select(<span class="string" style="color: #050;">'.chart'</span>)).toBeDefined(<span class="number" style="color: #800;">1</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">019:</span>&nbsp;&nbsp;&nbsp;&nbsp;});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">020:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">021:</span>&nbsp;&nbsp;&nbsp;&nbsp;it(<span class="string" style="color: #050;">'should&nbsp;provide&nbsp;getters&nbsp;and&nbsp;setters'</span>,&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>()&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">022:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;defaultWidth&nbsp;=&nbsp;barChart.width();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">023:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;defaultEase&nbsp;=&nbsp;barChart.ease();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">024:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">025:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barChart.width(<span class="number" style="color: #800;">1234</span>).ease(<span class="string" style="color: #050;">'linear'</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">026:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">027:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;newWidth&nbsp;=&nbsp;barChart.width();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">028:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;newEase&nbsp;=&nbsp;barChart.ease();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">029:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">030:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(defaultWidth).not.toBe(<span class="number" style="color: #800;">1234</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">031:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(defaultEase).not.toBe(<span class="string" style="color: #050;">'linear'</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">032:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(newWidth).toBe(<span class="number" style="color: #800;">1234</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">033:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(newEase).toBe(<span class="string" style="color: #050;">'linear'</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">034:</span>&nbsp;&nbsp;&nbsp;&nbsp;});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">035:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">036:</span>&nbsp;&nbsp;&nbsp;&nbsp;it(<span class="string" style="color: #050;">'should&nbsp;scope&nbsp;some&nbsp;private&nbsp;and&nbsp;some&nbsp;public&nbsp;fields&nbsp;and&nbsp;methods'</span>,&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>()&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">037:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(barChart.className).toBeUndefined();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">038:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(barChart.ease).toBeDefined();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">039:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(<span class="keyword" style="font-weight: bold; color: navy;">typeof</span>&nbsp;barChart.ease).toBe(<span class="string" style="color: #050;">'function'</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">040:</span>&nbsp;&nbsp;&nbsp;&nbsp;});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">041:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">042:</span>&nbsp;&nbsp;&nbsp;&nbsp;it(<span class="string" style="color: #050;">'should&nbsp;update&nbsp;a&nbsp;chart&nbsp;with&nbsp;new&nbsp;attributes'</span>,&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>()&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">043:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barChart.width(<span class="number" style="color: #800;">10000</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">044:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fixture.datum(dataset)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">045:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.call(barChart);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">046:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">047:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barChart.width(<span class="number" style="color: #800;">20000</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">048:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fixture.call(barChart);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">049:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">050:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(barChart.width()).toBe(<span class="number" style="color: #800;">20000</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">051:</span>&nbsp;&nbsp;&nbsp;&nbsp;});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">052:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">053:</span>&nbsp;&nbsp;&nbsp;&nbsp;it(<span class="string" style="color: #050;">'should&nbsp;update&nbsp;a&nbsp;chart&nbsp;with&nbsp;new&nbsp;data'</span>,&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>()&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">054:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fixture.datum(dataset)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">055:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.call(barChart);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">056:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">057:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;firstBarNodeData1&nbsp;=&nbsp;fixture.selectAll(<span class="string" style="color: #050;">'.bar'</span>)[<span class="number" style="color: #800;">0</span>][<span class="number" style="color: #800;">0</span>].__data__;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">058:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">059:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;dataset2&nbsp;=&nbsp;[<span class="number" style="color: #800;">1000</span>];<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">060:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fixture.datum(dataset2)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">061:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.call(barChart);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">062:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">063:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;firstBarNodeData2&nbsp;=&nbsp;fixture.selectAll(<span class="string" style="color: #050;">'.bar'</span>)[<span class="number" style="color: #800;">0</span>][<span class="number" style="color: #800;">0</span>].__data__;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">064:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">065:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(firstBarNodeData1).toBe(dataset[<span class="number" style="color: #800;">0</span>]);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">066:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(firstBarNodeData2).toBe(dataset2[<span class="number" style="color: #800;">0</span>]);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">067:</span>&nbsp;&nbsp;&nbsp;&nbsp;});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">068:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">069:</span>&nbsp;&nbsp;&nbsp;&nbsp;it(<span class="string" style="color: #050;">'should&nbsp;render&nbsp;two&nbsp;charts&nbsp;with&nbsp;distinct&nbsp;configuration'</span>,&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>()&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">070:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fixture.append(<span class="string" style="color: #050;">'div'</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">071:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.datum(dataset)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">072:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.call(barChart);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">073:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">074:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;dataset2&nbsp;=&nbsp;[<span class="number" style="color: #800;">400</span>,&nbsp;<span class="number" style="color: #800;">300</span>,&nbsp;<span class="number" style="color: #800;">200</span>,&nbsp;<span class="number" style="color: #800;">100</span>];<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">075:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;barChart2&nbsp;=&nbsp;d3.edge.barChart().ease(<span class="string" style="color: #050;">'linear'</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">076:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">077:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fixture.append(<span class="string" style="color: #050;">'div'</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">078:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.datum(dataset2)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">079:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.call(barChart2);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">080:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">081:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;charts&nbsp;=&nbsp;fixture.selectAll(<span class="string" style="color: #050;">'.chart'</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">082:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">083:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(charts[<span class="number" style="color: #800;">0</span>].length).toBe(<span class="number" style="color: #800;">2</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">084:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(barChart2.ease()).not.toBe(barChart.ease());<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">085:</span>&nbsp;&nbsp;&nbsp;&nbsp;});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">086:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">087:</span>&nbsp;&nbsp;&nbsp;&nbsp;it(<span class="string" style="color: #050;">'can&nbsp;be&nbsp;composed&nbsp;with&nbsp;another&nbsp;one'</span>,&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>()&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">088:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fixture.datum(dataset)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">089:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.call(barChart);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">090:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">091:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;barChart2&nbsp;=&nbsp;d3.edge.barChart();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">092:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">093:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fixture.selectAll(<span class="string" style="color: #050;">'.chart'</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">094:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.datum(dataset)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">095:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.call(barChart2);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">096:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">097:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;charts&nbsp;=&nbsp;fixture.selectAll(<span class="string" style="color: #050;">'.chart'</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">098:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">099:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(charts[<span class="number" style="color: #800;">0</span>].length).toBe(<span class="number" style="color: #800;">2</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">100:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(charts[<span class="number" style="color: #800;">0</span>][<span class="number" style="color: #800;">1</span>].parentElement).toBe(charts[<span class="number" style="color: #800;">0</span>][<span class="number" style="color: #800;">0</span>]);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">101:</span>&nbsp;&nbsp;&nbsp;&nbsp;});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">102:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">103:</span>&nbsp;&nbsp;&nbsp;&nbsp;it(<span class="string" style="color: #050;">'should&nbsp;render&nbsp;a&nbsp;chart&nbsp;for&nbsp;each&nbsp;data&nbsp;series'</span>,&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>()&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">104:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;dataset&nbsp;=&nbsp;[[<span class="number" style="color: #800;">1</span>,&nbsp;<span class="number" style="color: #800;">2</span>,&nbsp;<span class="number" style="color: #800;">3</span>,&nbsp;<span class="number" style="color: #800;">4</span>],&nbsp;[<span class="number" style="color: #800;">5</span>,&nbsp;<span class="number" style="color: #800;">6</span>,&nbsp;<span class="number" style="color: #800;">7</span>,&nbsp;<span class="number" style="color: #800;">8</span>],&nbsp;[<span class="number" style="color: #800;">9</span>,&nbsp;<span class="number" style="color: #800;">10</span>,&nbsp;<span class="number" style="color: #800;">11</span>,&nbsp;<span class="number" style="color: #800;">12</span>]];<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">105:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">106:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fixture.selectAll(<span class="string" style="color: #050;">'div.container'</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">107:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.data(dataset)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">108:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.enter().append(<span class="string" style="color: #050;">'div'</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">109:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.classed(<span class="string" style="color: #050;">'container'</span>,&nbsp;<span class="literal" style="color: #800;">true</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">110:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.datum(<span class="keyword" style="font-weight: bold; color: navy;">function</span>(d,&nbsp;i){&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;d;&nbsp;})<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">111:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.call(barChart);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">112:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">113:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;charts&nbsp;=&nbsp;fixture.selectAll(<span class="string" style="color: #050;">'.chart'</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">114:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">115:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(charts[<span class="number" style="color: #800;">0</span>].length).toBe(dataset.length);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">116:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(charts[<span class="number" style="color: #800;">0</span>][<span class="number" style="color: #800;">0</span>].__data__).toBe(dataset[<span class="number" style="color: #800;">0</span>]);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">117:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(charts[<span class="number" style="color: #800;">0</span>][<span class="number" style="color: #800;">1</span>].__data__).toBe(dataset[<span class="number" style="color: #800;">1</span>]);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">118:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(charts[<span class="number" style="color: #800;">0</span>][<span class="number" style="color: #800;">2</span>].__data__).toBe(dataset[<span class="number" style="color: #800;">2</span>]);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">119:</span>&nbsp;&nbsp;&nbsp;&nbsp;});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">120:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">121:</span>&nbsp;&nbsp;&nbsp;&nbsp;it(<span class="string" style="color: #050;">'should&nbsp;trigger&nbsp;a&nbsp;callback&nbsp;on&nbsp;events'</span>,&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>()&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">122:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fixture.datum(dataset)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">123:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.call(barChart);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">124:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">125:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;callback&nbsp;=&nbsp;jasmine.createSpy(<span class="string" style="color: #050;">"filterCallback"</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">126:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barChart.on(<span class="string" style="color: #050;">'customHover'</span>,&nbsp;callback);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">127:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">128:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;bars&nbsp;=&nbsp;fixture.selectAll(<span class="string" style="color: #050;">'.bar'</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">129:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bars[<span class="number" style="color: #800;">0</span>][<span class="number" style="color: #800;">0</span>].__onmouseover();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">130:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;callBackArguments&nbsp;=&nbsp;callback.argsForCall[<span class="number" style="color: #800;">0</span>][<span class="number" style="color: #800;">0</span>];<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">131:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">132:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(callback).toHaveBeenCalled();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">133:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expect(callBackArguments).toBe(dataset[<span class="number" style="color: #800;">0</span>]);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">134:</span>&nbsp;&nbsp;&nbsp;&nbsp;});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">135:</span>});</code></pre>
